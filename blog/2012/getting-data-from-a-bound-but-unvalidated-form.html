<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Getting Data From a Bound but Unvalidated Form - Felix Felicis</title>
        <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/static/fetch.css?v=0b9d7">
        
            <link rel="alternate" type="application/rss+xml" href=" /feed.xml" title="Felix Felicis">
        
        
    <link rel="canonical" href="/2012/getting-data-from-a-bound-but-unvalidated-form.html">
    

    </head>
    <body>
        <header class="site-header">
            <nav class="buttons">
                
                    <a href="/" title="Home">
                        <i data-icon="h"></i>
                        <span class="text">Home</span>
                    </a>
                
                    <a href="https://twitter.com/tsaylor" title="Twitter">
                        <i data-icon="t"></i>
                        <span class="text">Twitter</span>
                    </a>
                
                    <a href="https://github.com/tsaylor" title="GitHub">
                        <i data-icon="g"></i>
                        <span class="text">GitHub</span>
                    </a>
                
            </nav>
            
        </header>

        <main><article>
        <header>
            <h1>Getting Data From a Bound but Unvalidated Form</h1>
            <div class="meta">
                <time class="updated" datetime="2012-08-01T09:52:31+08:00" pubdate>August 01, 2012</time>
            </div>
        </header>

        <p>I have a form with dynamic fields, meaning the answers available for field B depend on the answer for field A.  Therefore, when the form is submitted I get the value from field B, but when it&#39;s redisplayed I have to read the value from field A and populate the choices for field B or else field B is blanked out in the browser. I looked for a convenient way to read the bound data from a specified form field and was surprised that I couldn&#39;t find one.  I could just read the POST, but this form is in a formset with a prefix, so I&#39;d have to assemble a complicated key name like &ldquo;foo_bar_form-1-fieldname&rdquo;.  The closest I saw to an interface to get the data was the _raw_value(fieldname) method which I couldn&#39;t get to work and is suboptimal since it&#39;s an internal call and could change in the future. I ended up having to go to the POST data anyway, but I saw a helper function in _raw_value(fieldname) that made it easier.  What I ended up doing was this: </p>

<pre><code>field_value = self.request.POST[form.add_prefix('fieldname')]</code></pre>
<p>add_prefix(fieldname) is a public method to take care of the prefix hassle for me, so reading the post value is doable.  The only thing to watch out for is that you have to handle potential invalid values when redisplaying a form with errors.</p>

<h2 id="toc_0">Comments</h2>
<p><strong><a href="#38" title="2012-08-16 16:57:38">Cezar</a>:</strong> Do you mean unbound data?</p>
<p><strong><a href="#39" title="2012-08-16 17:00:11">Cezar</a>:</strong> I guess my question is. How do you have bound data that&#39;s not validated? I thought is_valid() is what bound it?</p>
<p><strong><a href="#40" title="2012-08-21 12:13:01">tsaylor</a>:</strong> The data is bound when you instantiate the form with a dictionary in the first parameter. At that point the data can be found in form.data, and validating moves it to form.cleaned_data.</p>


    </article>
</main>
        <footer class="site-footer">
            <p>&copy; Tim Saylor.
            <br>Powered by <a href="http://lab.lepture.com/liquidluck/">Felix Felicis</a>
            <br>Theme based on <a href="https://github.com/roryg/ghostwriter">ghostwriter</a> by <a href="http://jollygoodthemes.com">JollyGoodThemes</a>, by way of <a href="https://github.com/kennethlove/alex-gaynor-blog-design">Kenneth Love</a>.</p>
        </footer>
    </body>
</html>